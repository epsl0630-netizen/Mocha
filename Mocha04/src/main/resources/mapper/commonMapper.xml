<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- Namespace를 통해 JAVA 클래스와 Annotation클래스와 동기 -->
<mapper namespace="mocha.ezen.com.common">
	<!-- <select id="searchUser" parameterType="mocha.ezen.com.UserSearchDTO" 
		resultType="mocha.ezen.com.UserDTO"> select user_id, user_pw, name, user_gender, 
		is_active, dept_id, email, mobile, user_birth, created_at, user_addr, user_file_name, 
		user_photo, user_rank from user <choose> <when test="sort == 'user_id'"> 
		where user_id = #{user_id} </when> <when test="sort == 'name'"> where name 
		= #{name} </when> </choose> </select> 내가 결재해야하는것 <select id="searchApproval" 
		parameterType="mocha.ezen.com.ApprovalSearchDTO" resultType="mocha.ezen.com.ApprovalDTO"> 
		select * from approval where approver.user_id = #{login_id} and approval_status 
		= 'IN_PROGRESS' <choose> <when test="sort == 'user_id'"> and user_id = #{user_id} 
		</when> <when test="sort == 'approval_title'"> and approval_title = #{name} 
		</when> </choose> </select> -->
	<!-- <insert id="join" parameterType="com.ezen.vo.UserVO"> insert into user 
		(userid,userpw,name,gender,hobby,fav,mail) values (#{userid},md5(#{userpw}),#{name},#{gender},#{hobby},#{fav},#{mail}) 
		</insert> <select id="checkid" parameterType="java.lang.String" resultType="java.lang.Integer"> 
		select count(*) as total from user where userid = #{ id } </select> <select 
		id="login" parameterType="com.ezen.vo.UserVO" resultType="com.ezen.vo.UserVO"> 
		select * from user where userid = #{ userid } and userpw = md5(#{ userpw 
		}) </select> <insert id="insert" parameterType="com.ezen.vo.BoardVO" useGeneratedKeys="true" 
		keyProperty="no"> insert into board (userid,title,kind,note,pname,fname) 
		values (#{userid},#{title},#{kind},#{note}, <if test='fname != null and !fname.equals("")'> 
		#{pname},#{fname} </if> <if test='fname == null or fname.equals("")'> null, 
		null </if> ) </insert> <select id="view" parameterType="java.lang.String" 
		resultType="com.ezen.vo.BoardVO"> select no,userid,title,kind,note,pname,fname,wdate,hit, 
		(select name from user where userid = board.userid) as name from board where 
		no = #{ no } </select> <update id="hit" parameterType="java.lang.String"> 
		update board set hit = hit + 1 where no = #{ no } </update> <update id="update" 
		parameterType="com.ezen.vo.BoardVO"> update board set title = #{ title }, 
		note = #{ note }, <if test='fname != null and !fname.equals("")'> pname = 
		#{pname}, fname = #{fname}, </if> kind = #{ kind } where no = #{ no } </update> 
		<delete id="delete_reply" parameterType="java.lang.String"> delete from reply 
		where no = #{ no } </delete> <delete id="delete" parameterType="java.lang.String"> 
		delete from board where no = #{ no } </delete> <select id="total" parameterType="com.ezen.vo.SearchVO" 
		resultType="java.lang.Integer"> select count(*) as total from board where 
		kind = #{ kind } <if test='keyword != null and !keyword.equals("")'> and 
		title like '%${ keyword }%' </if> </select> <select id="list" parameterType="com.ezen.vo.SearchVO" 
		resultType="com.ezen.vo.BoardVO"> select no,title,date(wdate) as wdate,hit, 
		(select name from user where userid = board.userid) as name, (select count(*) 
		from reply where no = board.no) as rcount from board where kind = #{ kind 
		} <if test='keyword != null and !keyword.equals("")'> and title like '%${ 
		keyword }%' </if> order by no desc limit #{offset},10 </select> <insert id="reply_insert" 
		parameterType="com.ezen.vo.ReplyVO" useGeneratedKeys="true" keyProperty="rno"> 
		insert into reply (no, userid, rnote) values (#{no}, #{userid}, #{rnote}) 
		</insert> <select id="reply_list" parameterType="java.lang.String" resultType="com.ezen.vo.ReplyVO"> 
		select rno,userid,rnote,date(rwdate) as rwdate, (select name from user where 
		userid = reply.userid) as name from reply where no = #{no} order by rno desc 
		</select> <delete id="reply_delete" parameterType="java.lang.String"> delete 
		from reply where rno = #{rno} </delete> -->
</mapper>
